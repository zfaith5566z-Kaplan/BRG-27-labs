Domain, DNS and TLS Certificates with Let's Encrypt

This lab introduces students to setting up a complete Internet-facing web presence. Students will configure a cloud VM, purchase and link a domain name, set DNS records, and secure their site with HTTPS using Let's Encrypt. The goal is to empower students to create real online services with full control.
Learning Objectives
â€¢	- Launch a cloud VM and configure firewall access (ports 22, 80, 443).
â€¢	- Install and run a basic Apache web server.
â€¢	- Purchase and manage a domain name via a registrar.
â€¢	- Link domain to VM public IP using DNS A record.
â€¢	- Verify domain resolution using ping and nslookup.
â€¢	- Obtain and install a TLS certificate via Letâ€™s Encrypt.
â€¢	- Understand DNS propagation, redundancy, and failover behaviour.

Lab Setup and Tasks
â€¢	- Launch Ubuntu VM using Amazon EC2, Azure, or DigitalOcean.
â€¢	- Ensure inbound ports 22 (SSH), 80 (HTTP), and 443 (HTTPS) are open.
â€¢	- Install Apache: `sudo apt install apache2`.
â€¢	- Record public IP address of the VM. Access in browser to confirm Apache page.
â€¢	- Register a domain (Namecheap, GoDaddy, Cloudflare, Route 53, etc).
â€¢	- Create an A record pointing your domain to the public IP of your server.
â€¢	- Wait for DNS propagation and test with browser, ping, and nslookup.
â€¢	- Install Certbot: `sudo apt install certbot python3-certbot-apache`.
â€¢	- Run: `sudo certbot --apache` to generate and install the certificate.
â€¢	- Check site: HTTPS lock icon should appear in browser.

Experimentation and Advanced Tasks
â€¢	- Who issued the SSL certificate for murdoch.edu.au and csn.murdoch.edu.au?
â€¢	- Can you use a subdomain to point to another studentâ€™s server?
â€¢	- Create two A records with different IPs. Observe failover behaviour.
â€¢	- Shutdown server and observe DNS delay in failover. Discuss why.
â€¢	- Reflect on DNS load balancing, round-robin, and high-availability use cases.

Budget and Cost Monitoring
â€¢	- Visit EC2 Billing Dashboard to monitor charges.
â€¢	- Set a budget and create usage alerts under AWS Budgets.
â€¢	- Terminate unused instances to avoid unnecessary charges.
â€¢	- Avoid running expensive instance types (e.g. with GPUs) if not required.
â€¢	- Disable domain auto-renew if not continuing use post-semester.

Reflection Questions
â€¢	- What is the role of DNS in Internet presence?

DNS is the foundational directory for the internet. It translates human-friendl
y domain names (e.g., www.hello123.com) into machine-readable IP addresses,
directing global traffic to your server. Without DNS, users would need to be
note down complex numerical addresses to access their site, making their websites
unknown and transparent to others.

â€¢	- Why does DNS propagation take time?

DNS propagation takes a longer time because of caching. The records are stored
(cached) by ISPs and resolvers worldwide to improve speed. When updating a record,
it takes time for these cached copies to expire and be replaced with new
information. The TTL (Time to Live) setting let a record decides how long caches
should retain it before checking for an update.

â€¢	- How does Letâ€™s Encrypt validate domain ownership?

Let's Encrypt verify domain ownership by setting it automatically using the ACME
protocol. A common method is the HTTP-01 challenge, where the certificate
authority (CA) grants the applicant a unique token to place on their web server.
Let's Encrypt then attempts to retrieve this token from a specific URL on the
domain in question. Successfully retrieving the token proves control of the domain
to authorize the CA to issue the certificate.

â€¢	- What are the risks if TLS is not configured on a public-facing site?

The absence of TLS exposes all data transmitted between the user and the server
in plaintext, making it vulnerable to interception and theft. Furthermore,
modern browsers explicitly mark non-HTTPS sites as "Not Secure," diminishes
user trust and damaging the site's credibility. Search engines penalize such
sites in their rankings, and it often constitutes a violation of data protection
regulations like PCI DSS and GDPR. 4

â€¢	- What could happen if you leave your cloud VM running for months?

Leaving a cloud VM running poses a significant financial and security risks. The most direct impact is operational costs. From a security perspective, an unmaintained VM is a live target for attackers if its software or operating system when is not regularly patched to address newly discovered vulnerabilities. 5 

References

â€¢	Cloudflare. (n.d.-a). What is DNS? Cloudflare Learning. Retrieved June 4, 2024, from https://www.cloudflare.com/learning/dns/what-is-dns/
â€¢	Amazon Web Services. (n.d.). What is DNS? AWS. Retrieved June 4, 2024, from https://aws.amazon.com/route53/what-is-dns/
â€¢	Letâ€™s Encrypt. (n.d.). How It Works. Let's Encrypt Documentation. Retrieved June 4, 2024, from https://letsencrypt.org/how-it-works/
â€¢	UK Information Commissioner's Office. (n.d.). Security. Guide to the GDPR. Retrieved June 4, 2024, from https://ico.org.uk/for-organisations/guide-to-data-protection/guide-to-the-general-data-protection-regulation-gdpr/security/
â€¢	Center for Internet Security. (2024, May 6). CIS Critical Security Control 7: Continuous Vulnerability Management. CIS. Retrieved June 4, 2024, from https://www.cisecurity.org/controls/continuous-vulnerability-management


ðŸŸ¢ Activity 1: Domain, DNS
ðŸ“¦ Deliverables:
#	Deliverable	Description
1	Domain Name Registered	A registered domain from Namecheap, GoDaddy, Route 53, or similar ICT171pof.xyz
2	A Record Created	DNS A record pointing your domain to your VM's public IP

Require to install ifconfig.me on the VM,
run: curl ifconfig.me
sudo snap install curl

3	Apache Installed	Apache2 running and accessible on port 80
4	Public IP to Domain Mapping Verified	Test using nslookup, dig, and browser to confirm DNS is working
5	Screenshot: Apache Welcome Page via Domain	Open http://yourdomain.com and capture the Apache welcome page
6	Screenshot: DNS Test Output	Output of nslookup yourdomain.com or dig
7	(Optional) Subdomain Experiment	A record pointing a subdomain (e.g., test.yourdomain.com) to another IP and screenshot of test result

ðŸŸ¢ Activity 2: Letâ€™s Encrypt TLS Certificate Setup
You secure your domain with HTTPS by installing a free Let's Encrypt TLS certificate using Certbot.
ðŸ“¦ Deliverables:
#	Deliverable	Description
1	Certbot Installed	Certbot and Apache plugin installed via Snap
2	HTTPS Enabled on Domain	https://yourdomain.com should show a secure lock icon
3	Valid TLS Certificate	Certificate issued by Letâ€™s Encrypt (viewable in browser)
4	Screenshot: HTTPS with Lock Icon	Browser screenshot showing lock and certificate issuer
5	Screenshot: Certbot Success Message	Output of sudo certbot --apache command
6	Screenshot: Renewal Dry-Run Output	Output of sudo certbot renew --dry-run showing success
7	(Optional) Expired Certificate Simulation	Screenshot or explanation of what happens when the cert isn't renewed (if explored)
